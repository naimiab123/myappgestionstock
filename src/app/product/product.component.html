<div class="container">
<div class="row">
  <div class="col-lg-7">
      <div class="card">
          <div class="card-header bg-info text-white">
           Product List
          </div>
          <div class="card-body">
            <h5 class="card-title">Special  treatment</h5>
            <table class="table table-striped table-secondary">
              <thead>
                <tr>
                  <th scope="col">Reference</th>
                  <th scope="col">Quantity</th>
                  <th scope="col">Unit Price</th>
                  <th><button class="btn btn-outline-primary" (click)="operation = 'add'; initProduct();" ><i class="fa fa-plus" aria-hidden="true"></i> ADD</button></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let product of products">
                  
                  <td>{{product.ref}} </td>
                  <td>{{product.quantity}}</td>
                  <td>{{product.unitPrice | number : '1.2-2'}}</td>
                  <td><button class="btn btn-outline-danger" (click)="operation = 'remove'; selectedProduct.ref=product.ref"><i class="fas fa-trash-alt"></i> Remove</button> <button class="btn btn-outline-success" (click)="operation = 'edit'; selectedProduct = product;" ><i class="far fa-edit"></i> Edit</button></td>
                </tr>
                
               
              </tbody>
            </table>
          </div>
        </div>
  </div>
  
  <div class="col-lg-5">
      <div class="card">
          <div class="card-header bg-info text-white">
            {{operation == 'add'? 'Add Product' :
              operation == 'remove'? 'Delete Product' :
              operation == 'edit'? 'Modify Product': ''}}
            
          </div>
          <div class="card-body">

            <h5 class="card-title">Special Form treatment</h5>

            <div *ngIf="operation == 'add' || operation == 'edit'">
                <form [formGroup]="productForm">
                    <div class="form-group">
                      <label for="reference">Reference</label>  
                      <input type="text" class="form-control" formControlName="ref" [(ngModel)] = "selectedProduct.ref"/>
                    </div>
                    <div class="alert alert-danger" *ngIf="productForm.controls['ref'].invalid &&
                                                           (productForm.controls['ref'].touched || productForm.controls['ref'].dirty)">
                        Reference est obligatoire
                      </div>
                    <div class="form-group">
                        <label for="quantity">Quantity</label>  
                        <input type="number" class="form-control" formControlName="quantity" [(ngModel)] = "selectedProduct.quantity"/>
                      </div>
                      
                      <div class="form-group">
                          <label for="unitPrice">Unit Price</label>  
                          <input type="number" class="form-control" formControlName="unitPrice" [(ngModel)] = "selectedProduct.unitPrice"/>
                      </div>
                        <button type="submit" 
                                      (click)=" operation == 'add'? onAddProduct() : 
                                                operation == 'edit'? updateProduct(): ''"
                                                           
                                class="btn btn-success" [disabled]="productForm.prestine || productForm.invalid">
                                {{operation == 'add'? 'Add-Product' :
                                  operation == 'edit'? 'Modify-Product': ''}}
                              </button>
                  </form>
      
            </div>
                <div *ngIf="operation == 'remove'">
                  <p class="card-title">
                  <label class="badge badge-secondary">{{selectedProduct.ref}}</label>  
                  </p>
                  <p>Voulez vous supprimer ce produit</p>
                  <button class="btn btn-danger" [disabled]="!selectedProduct.ref" (click)="deleteProduct()">Delete-Product</button>

                </div>
            
          </div>
        </div>
  </div>
</div>
</div>